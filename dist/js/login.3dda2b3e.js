(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{"445d":function(e,n,t){"use strict";function r(e,n){e.skip&&(e.setVariables(n),e.skip=!1,e.stop(),e.start())}t.d(n,"a",(function(){return r}))},"578a":function(e,n,t){"use strict";t.r(n);var r=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticStyle:{width:"300px",margin:"auto"}},[t("b-form-input",{attrs:{placeholder:"username",id:"input_text"},model:{value:e.username,callback:function(n){e.username=n},expression:"username"}}),t("b-form-input",{attrs:{placeholder:"password",id:"input_text"},model:{value:e.password,callback:function(n){e.password=n},expression:"password"}}),t("b-button",{attrs:{variant:"primary"},on:{click:e.logIn}},[e._v("Log In")]),t("br"),t("Alert",{ref:"Alert",staticStyle:{margin:"auto"},attrs:{text:e.text}})],1)},s=[],a=t("1da1"),i=(t("96cf"),t("287d")),o=t("445d"),u=t("af9a"),m=t("cc4a"),c={name:"Login",components:{Alert:m["a"]},data:function(){return{username:"",password:"",text:""}},apollo:{login:{query:u["f"],skip:!0,variables:{username:"",password:""}},usernameExists:{query:u["q"],skip:!0},me:{query:u["g"],skip:!0}},methods:{checkIfExistUser:function(e){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Object(o["a"])(n.$apollo.queries.usernameExists,{username:e}),t.prev=1,t.next=4,n.$apollo.queries.usernameExists.refetch({username:e});case 4:return r=t.sent,t.abrupt("return",r.data.usernameExists);case 8:t.prev=8,t.t0=t["catch"](1),n.text="".concat(t.t0.message);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()},logIn:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var t,r,s,a,u,m;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t=e.username,r=e.password,n.next=4,e.checkIfExistUser(t);case 4:if(s=n.sent,"undefined"==typeof s){n.next=30;break}if(!s){n.next=29;break}return Object(o["a"])(e.$apollo.queries.login,{username:t,password:r}),Object(o["a"])(e.$apollo.queries.me,{}),n.prev=9,n.next=12,e.$apollo.queries.login.refetch({username:t,password:r});case 12:return a=n.sent,u=a.data.login,n.next=16,Object(i["b"])(e.$apollo.provider.defaultClient,u);case 16:return n.next=18,e.$apollo.queries.me.refetch();case 18:m=n.sent,localStorage.setItem("user",JSON.stringify(m.data.me)),e.text="".concat(t,", welcome! "),e.$router.push("rooms"),n.next=27;break;case 24:n.prev=24,n.t0=n["catch"](9),e.text="".concat(n.t0.message);case 27:n.next=30;break;case 29:e.text='user "'.concat(e.username,'" does not exist');case 30:e.$refs.Alert.showAlert();case 31:case"end":return n.stop()}}),n,null,[[9,24]])})))()}}},d=c,f=t("2877"),l=Object(f["a"])(d,r,s,!1,null,null,null);n["default"]=l.exports},af9a:function(e,n,t){"use strict";t.d(n,"k",(function(){return k})),t.d(n,"f",(function(){return j})),t.d(n,"q",(function(){return D})),t.d(n,"l",(function(){return E})),t.d(n,"g",(function(){return O})),t.d(n,"b",(function(){return R})),t.d(n,"p",(function(){return q})),t.d(n,"c",(function(){return S})),t.d(n,"m",(function(){return C})),t.d(n,"o",(function(){return I})),t.d(n,"n",(function(){return A})),t.d(n,"d",(function(){return _})),t.d(n,"e",(function(){return M})),t.d(n,"a",(function(){return z})),t.d(n,"h",(function(){return U})),t.d(n,"i",(function(){return J})),t.d(n,"j",(function(){return L}));t("fb6a"),t("dca8");function r(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}var s,a,i,o,u,m,c,d,f,l,p,b,x,g,w,h,v,$=t("9530"),y=t.n($),k=y()(s||(s=r(["query register ($username: String!, $password: String!){\n    user: register(username: $username, password: $password) {\n        id\n        username\n        timestamp\n    }\n   }"]))),j=y()(a||(a=r(["query login($username: String!, $password: String!){\n    login: login(username: $username, password: $password)\n  }"]))),D=y()(i||(i=r(["query usernameExists($username: String!){\n    usernameExists(username: $username)\n  }"]))),E=y()(o||(o=r(["query rooms{\n  rooms{\n    id\n    name\n    owner{\n      id\n      username\n    }\n  }\n  }"]))),O=y()(u||(u=r(["query me{\n  me{\n    username\n    id\n    currentRoom{\n      id\n      name\n      lastMessages{\n        id\n        text\n        author {\n          id\n          username\n        }\n        timestamp\n      }\n      owner{\n        id\n        username\n      }\n      members{\n        id\n        username\n      }\n    }\n  }\n}"]))),R=y()(m||(m=r(["mutation createRoom($roomname: String!) {\n  createRoom(name: $roomname) {\n    id\n    name\n    timestamp\n  }\n}"]))),q=y()(c||(c=r(["mutation updateRoom($id: ID!, $new_name: String!) {\n  updateRoom(id: $id, name: $new_name) {\n    id \n    name\n    timestamp\n  }\n}"]))),S=y()(d||(d=r(["mutation deleteRoom($id: ID!) {\n  deleteRoom(id: $id) {\n    id \n    name\n    timestamp\n  }\n}"]))),C=y()(f||(f=r(["subscription roomCreated {\n  roomCreated {\n    id name owner {id username}\n    lastMessages{\n      id\n      text\n      author {\n        username\n      }\n      timestamp\n    }\n  }\n}"]))),I=y()(l||(l=r(["subscription roomUpdated {\n  roomUpdated {\n    id name owner {id username}     \n    lastMessages{\n      text\n      author {\n        username\n      }\n      timestamp\n    }\n  }\n}"]))),A=y()(p||(p=r(["subscription roomDeleted {\n  roomDeleted {\n    id name owner {id username}\n    lastMessages{\n      text\n      author {\n        username\n      }\n      timestamp\n    }\n  }\n}"]))),_=y()(b||(b=r(["mutation join($id: ID!) {\n  joinRoom(roomId: $id) {\n    id\n    name\n    lastMessages{\n      id\n      text\n      author {\n        id\n        username\n      }\n      timestamp\n    }\n    members{\n      id\n      username\n    }\n    owner{\n      id\n      username\n    }\n  }\n}"]))),M=y()(x||(x=r(["mutation leave {\n  leaveCurrentRoom {\n    id \n    name\n  }\n}"]))),z=y()(g||(g=r(["mutation createMessage($text: String!) {\n  createMessage(text: $text) {\n    id\n    timestamp\n    author { id username }\n    text\n  }\n}"]))),U=y()(w||(w=r(["subscription memberJoined {\n  memberJoined { id username }\n}"]))),J=y()(h||(h=r(["subscription memberLeft {\n  memberLeft { id username }\n}"]))),L=y()(v||(v=r(["subscription messageCreated {\n  messageCreated {\n    id\n    timestamp\n    author { id username }\n    text\n  }\n}"])))},bb2f:function(e,n,t){var r=t("d039");e.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},cc4a:function(e,n,t){"use strict";var r=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("b-alert",{attrs:{show:e.dismissCountDown,dismissible:"",variant:"info"},on:{dismissed:function(n){e.dismissCountDown=0},"dismiss-count-down":e.countDownChanged}},[e._v(" "+e._s(e.text)+" "),t("b-progress",{attrs:{variant:"info",max:e.dismissSecs,value:e.dismissCountDown,height:"4px"}})],1)},s=[],a={name:"Alert",data:function(){return{dismissSecs:10,dismissCountDown:0,text:""}},methods:{countDownChanged:function(e){this.dismissCountDown=e},showAlert:function(e){this.text=e,this.dismissCountDown=this.dismissSecs}}},i=a,o=t("2877"),u=Object(o["a"])(i,r,s,!1,null,null,null);n["a"]=u.exports},dca8:function(e,n,t){var r=t("23e7"),s=t("bb2f"),a=t("d039"),i=t("861d"),o=t("f183").onFreeze,u=Object.freeze,m=a((function(){u(1)}));r({target:"Object",stat:!0,forced:m,sham:!s},{freeze:function(e){return u&&i(e)?u(o(e)):e}})},f183:function(e,n,t){var r=t("d012"),s=t("861d"),a=t("5135"),i=t("9bf2").f,o=t("90e3"),u=t("bb2f"),m=o("meta"),c=0,d=Object.isExtensible||function(){return!0},f=function(e){i(e,m,{value:{objectID:"O"+ ++c,weakData:{}}})},l=function(e,n){if(!s(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,m)){if(!d(e))return"F";if(!n)return"E";f(e)}return e[m].objectID},p=function(e,n){if(!a(e,m)){if(!d(e))return!0;if(!n)return!1;f(e)}return e[m].weakData},b=function(e){return u&&x.REQUIRED&&d(e)&&!a(e,m)&&f(e),e},x=e.exports={REQUIRED:!1,fastKey:l,getWeakData:p,onFreeze:b};r[m]=!0},fb6a:function(e,n,t){"use strict";var r=t("23e7"),s=t("861d"),a=t("e8b5"),i=t("23cb"),o=t("50c4"),u=t("fc6a"),m=t("8418"),c=t("b622"),d=t("1dde"),f=d("slice"),l=c("species"),p=[].slice,b=Math.max;r({target:"Array",proto:!0,forced:!f},{slice:function(e,n){var t,r,c,d=u(this),f=o(d.length),x=i(e,f),g=i(void 0===n?f:n,f);if(a(d)&&(t=d.constructor,"function"!=typeof t||t!==Array&&!a(t.prototype)?s(t)&&(t=t[l],null===t&&(t=void 0)):t=void 0,t===Array||void 0===t))return p.call(d,x,g);for(r=new(void 0===t?Array:t)(b(g-x,0)),c=0;x<g;x++,c++)x in d&&m(r,c,d[x]);return r.length=c,r}})}}]);
//# sourceMappingURL=login.3dda2b3e.js.map